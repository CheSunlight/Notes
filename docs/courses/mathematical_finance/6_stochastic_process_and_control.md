# Stochastic Process and Control

### Stochastic Process
Let $\Omega$ be a nonempty sample space with a filtration $\mathcal{F}(t)$, $0\leqslant t\leqslant T$ and let $X(t)$ be a collection of random variables indexed by $t\in [0,\ T]$. We say this collection of random variables is a stochastic process. If for each $t$, the random variable $X(t)$ is $\mathcal{F}(t)$-measurable, then we call it an <mark>adapted stochastic process</mark>.

The definition above means for each $t\in [0,\ T]$, we have a random variable $X(t):\ \omega\to X(t,\ \omega),\ \forall \omega\in \Omega$. Fixing $\omega\in \Omega$, a function that maps $t$ to $X(t,\ \omega)$ is called a <mark>path</mark> of $X(t),\ \forall t\in [0,\ T]$.

#### Martingale
If $\{X(t)\}_{t=0}^{T}$ satisfies the following 3 conditions: 
- $\{X(t)\}_{t=0}^{T}$ is adapted to $\{\mathcal{F}(t)\}_{t=0}^{T}$ on $(\Omega,\ \mathcal{F},\ \mathbb{P})$;
- $\mathrm{E}(\left\vert X(t) \right\vert )<\infty,\ \forall t\in [0,\ T]$;
- $\mathrm{E}(X(s)|X(t))=X(t),\ \forall s\geqslant t$,

then we call it a martingale w.r.t. $\{\mathcal{F}(t)\}_{t=0}^{T}$ and $\mathbb{P}$.

For example, a wiener process $W(t)$ is a martingale w.r.t. $\{\sigma(W(s))\}_{s=0}^{t}$ which is a filtration composed of $\sigma$-algebra generated by $W(s),\ \forall s\in [0,\ t]$.

> If you have forgotten the notions above, please go back to [Probability Theory](courses/mathematical_finance/4_probability_theory.md#measurable-theorem).

> [!NOTE]
> The time-discounted price process of a financial asset without paying dividends is a martingale under a risk-neutral probability measure.

### The Black-Scholes Option Pricing Model
Assume there are 3 assets in the market: 
- A risk-free asset with interest rate $r$ per unit time.
- A risky asset (stock) whith price satisfying $\mathrm{d}S(t) = \mu S(t)\mathrm{d}t + \sigma S(t) \mathrm{d}W(t),\ t\geqslant 0$.
- An European call option with payoff $(S(T)-K)^{+}$ for maturity date $T>0$ and strike price $K$.

The price of the call option at time $t$ is given by 
$$
\begin{aligned}
 V(t) &= e^{-r(T-t)} \widetilde{\mathrm{E}} \left[ (S(T)-K)^{+} | \mathcal{F}(t) \right] \\
 &= e^{-r(T-t)} \widetilde{\mathrm{E}} \left[ \left(S(t) e^{(r-\frac{1}{2}\sigma^{2})(T-t)+\sigma \widetilde{W}(T-t)}-K\right)^{+} \Big| \mathcal{F}(t) \right]
\end{aligned}
$$

> [!TIP]
> Recall the <abbr title='Geometric Brownian Motion'>GBM</abbr> is $S(t) = S(0)e^{(\mu-\frac{1}{2}\sigma^{2})t + \sigma W(t)}$ and we have shown that $\mu$ would be $r$ in a risk-neutral probability measure by the [Girsanov Theorem](courses/mathematical_finance/4_probability_theory.md#girsanov-theorem).

From this we can derive that 
$$
V(t) = S(t)\Phi(d_1) - Ke^{-r(T-t)}\Phi(d_2)
$$
where $\Phi(\cdot)$ is the cdf of standard normal distribution and 
$$
d_1 = \frac{\log \left(\frac{S(t)}{K} \right) + \left( r + \frac{\sigma^{2}}{2} \right) (T-t)}{\sigma \sqrt{T-t}},\ \qquad d_2 = d_1 - \sigma \sqrt{T-t}
$$
Recall that in the [multi-period binomial model](courses/mathematical_finance/5_binomial_model.md#multi-period-binomial-model), we use 
$$
\Delta_n(S_n) = \frac{V_{n+1}(u\, S_n)-V_{n+1}(d\, S_n)}{u\, S_n - d\, S_n}
$$
shares of stock to hedge our portfolio.

Similarly, in the <abbr title='Black-Scholes'>B-S</abbr> model, we use 
$$
\Delta(t,\ S(t)) = \frac{\partial V(t,\ S(t))}{\partial S(t)}
$$
shares of stock to hedge our portfolio.
